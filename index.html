<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Letter ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600&family=VT323&display=swap');
        body { background-color: #fdf2f2; font-family: 'Plus Jakarta Sans', sans-serif; color: #b55d7e; overflow-x: hidden; }
        .pixel-font { font-family: 'VT323', monospace; }
        .paper-hd {
            background: #fffef0;
            background-image: radial-gradient(#d1d1d1 0.5px, transparent 0);
            background-size: 20px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05), inset 0 0 80px rgba(212, 184, 138, 0.15);
            border-left: 8px solid #e2d5bb;
        }
        .typing { border-right: 3px solid #b55d7e; white-space: pre-wrap; animation: blink 0.7s infinite; }
        @keyframes blink { 50% { border-color: transparent } }
        .btn-pink { background: #b55d7e; color: white; padding: 12px 30px; border-radius: 12px; transition: 0.3s; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <div id="app" class="max-w-2xl w-full">
        
        <div v-if="step < 3" class="text-center animate__animated animate__fadeIn">
            <h1 class="pixel-font text-6xl md:text-8xl mb-10 uppercase tracking-widest">
                {{ step === 1 ? 'Hi' : 'Happy Birthday!' }}
            </h1>
            <button @click="nextStep" class="btn-pink pixel-font text-2xl shadow-xl">Next</button>
        </div>

        <div v-if="step === 3" class="text-center animate__animated animate__zoomIn">
            <h2 class="text-2xl mb-8 font-semibold">You have a new message!</h2>
            <div @click="nextStep" class="text-[120px] mb-8 cursor-pointer hover:scale-110 transition-transform">üì©</div>
            <button @click="nextStep" class="btn-pink font-bold italic">Open the Letter</button>
        </div>

        <div v-if="step === 4" class="animate__animated animate__fadeInUp">
            <div class="paper-hd p-6 md:p-10 rounded-2xl min-h-[400px]">
                <div class="typing text-gray-700 text-lg md:text-xl leading-relaxed font-medium">
                    {{ displayedText }}
                </div>
                <p v-if="isTypingDone" class="text-right mt-10 italic font-bold animate__animated animate__fadeIn">
                    With love, <br> {{ yourName }}
                </p>
            </div>
            
            <div v-if="isTypingDone" class="mt-8 grid grid-cols-4 gap-3 animate__animated animate__fadeInUp">
                <button v-for="(msg, key) in extraMessages" @click="openPopup(key)" class="bg-white p-3 rounded-xl border border-pink-100 shadow-sm hover:bg-pink-50 transition">
                    <span class="block text-2xl">‚úâÔ∏è</span>
                    <span class="text-[10px] font-bold uppercase">{{ key }}</span>
                </button>
            </div>
        </div>

        <div v-if="showPopup" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-6">
            <div class="bg-white rounded-3xl p-8 max-w-sm w-full relative animate__animated animate__zoomIn text-center">
                <button @click="showPopup = false" class="absolute top-4 right-4 text-2xl">&times;</button>
                <p class="text-gray-700 leading-relaxed">{{ activeMessage }}</p>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    step: 1,
                    yourName: "F",
                    startTime: 30,
                    endTime: 60,
                    displayedText: "",
                    fullText: "Hi Sayang, Happy Birthday Barakallah fii umrik ÿ®ÿßÿ±ŸÉ ÿßŸÑŸÑŸá ŸÅŸä ÿπŸÖÿ±ŸÉ !\n\nHari ini bukan sekadar tentang usia yang bertambah. Ini tentang kamu yang tetap berjalan meski hidup tidak selalu lembut. Tentang kamu yang tetap berdiri meski pernah goyah. Dan percayalah, semua yang sudah kamu lalui bukan kebetulan.\n\nŸÑŸéÿß ŸäŸèŸÉŸéŸÑŸëŸêŸÅŸè ÿßŸÑŸÑŸëŸ∞ŸáŸè ŸÜŸéŸÅŸíÿ≥Ÿãÿß ÿßŸêŸÑŸëŸéÿß ŸàŸèÿ≥ŸíÿπŸéŸáŸéÿß€ó \n\nAllah tidak membebani seseorang melainkan sesuai kesanggupannya. \n\nJika ujian itu pernah datang kepadamu, itu karena kamu mampu melewatinya. Luka yang hadir bukan tanda kelemahan, tetapi bukti bahwa kamu sedang ditempa menjadi pribadi yang lebih dalam dan lebih kuat. \n\nKe depan, memang tidak ada yang benar-benar pasti. Tapi ada satu hal yang selalu bisa kamu pegang: janji-Nya. \n\nŸÅŸéÿßŸêŸÜŸëŸé ŸÖŸéÿπŸé ÿßŸÑŸíÿπŸèÿ≥Ÿíÿ±Ÿê ŸäŸèÿ≥Ÿíÿ±Ÿãÿß€ô \n\nSesungguhnya bersama kesulitan ada kemudahan. \n\nBukan setelahnya, tapi bersamanya. Maka jika hari-hari terasa berat, percayalah bahwa di saat yang sama Allah sedang menyiapkan kelapangan untukmu. \n\nSemoga kamu selalu diberi hati yang luas untuk menerima, dan rasa syukur yang cukup untuk menikmati apa yang ada. Karena dalam Al-Qur'an juga disebutkan: \n\nŸÑŸéŸâŸïŸêŸÜŸí ÿ¥ŸéŸÉŸéÿ±Ÿíÿ™ŸèŸÖŸí ŸÑŸéÿßŸéÿ≤ŸêŸäŸíÿØŸéŸÜŸëŸéŸÉŸèŸÖŸí  \n\nJika kamu bersyukur, pasti Allah akan menambah nikmat kepadamu. \n\nDan tentang sabar ingatlah apa yang ditulis oleh Abu Hamid Al-Ghazali dalam kitab Ihya‚Äô Ulumuddin: \n\n‚ÄúSabar adalah keteguhan hati dalam menerima takdir tanpa kehilangan adab kepada Allah.‚Äù \n\nKamu sudah melakukannya sejauh ini. Kamu tetap menjaga hatimu, tetap berusaha, tetap percaya meski tidak selalu mengerti rencana-Nya. \n\nDi usia yang baru ini, semoga luka-luka yang pernah singgah perlahan sembuh, diganti dengan bahagia yang lebih utuh. Semoga Tuhan selalu menjaga langkahmu, menuntun keputusanmu, dan memberi kelapangan dalam setiap hal yang belum kamu miliki. Karena pada akhirnya, yang membuatmu istimewa bukan sekadar apa yang kamu capai, tetapi bagaimana kamu memilih untuk tetap tumbuh, tetap percaya, dan tetap melangkah. Terima kasih sudah bertahan sejauh ini.",
                    isTypingDone: false,
                    showPopup: false,
                    activeMessage: '',
                    extraMessages: {
                        thanks: "Makasih udah selalu ada...",
                        happy: "Semoga bahagia terus ya!",
                        sorry: "Taqabbalallahu minna wa minkum (ÿ™ŸÇÿ®ŸÑ ÿßŸÑŸÑŸá ŸÖŸÜÿß ŸàŸÖŸÜŸÉŸÖ)",
                        sad: "Jangan sedih, ada aku di sini."
                    }
                }
            },
            methods: {
                nextStep() {
                    if (this.step === 1) {
                        this.startMusic();
                    }
                    this.step++;
                    if (this.step === 4) {
                        setTimeout(() => this.typeEffect(), 500);
                    }
                },
                startMusic() {
                    const audio = document.getElementById('bgMusic');
                    audio.currentTime = this.startTime;
                    
                    // Handle autoplay policy
                    const playPromise = audio.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(error => {
                            console.log("Autoplay prevented:", error);
                        });
                    }

                    audio.addEventListener('timeupdate', () => {
                        if (audio.currentTime >= this.endTime) {
                            audio.pause();
                            audio.currentTime = this.startTime;
                        }
                    });
                },
                typeEffect() {
                    let i = 0;
                    const timer = setInterval(() => {
                        if (i < this.fullText.length) {
                            this.displayedText += this.fullText.charAt(i);
                            i++;
                        } else {
                            clearInterval(timer);
                            this.isTypingDone = true;
                        }
                    }, 50);
                },
                openPopup(key) {
                    this.activeMessage = this.extraMessages[key];
                    this.showPopup = true;
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
